<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href=".\css\style.css">
  <link rel="shortcut icon" href="./assets\imgs\logo.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
    rel="stylesheet">

  <script src="./js/sessao.js"></script>



  <link rel="preconnect" href="https://fonts.gstatic.com">
  <title>Blue Horizon</title>
</head>

<body>
  <header>
    <div>
      <nav class="navbar" id="id_navbar">
        <div class="logo">
          <a href="index.html">
            <img src="./assets\imgs/logo_semfundo.png" alt="logo_blueHorizon">
          </a>
        </div>

        <div class="nav-menu">
          <a href="index.html" class="home">Home</a>
          <a href="#titulo_postagens" class="servicos">Serviços</a>
          <a href="#tubarao" class="sobreNos">Sobre Nós</a>
          <a href="#form_nome" class="contato2">Contato</a>
          <button id="entrar" onclick="document.getElementById('div_login').style.display='block'">Entrar</button>
        </div>
      </nav>
    </div>
  </header>
  <div class="corpo">



    <div class="corpo_titulo">
      <div id="titulo_inicio">
        <p id="titulo_texto">EXPLORE O MUNDO MARINHO COM BLUE HORIZON</p>
        <p id="subtitulo">Explore o Blue Horizon e descubra o incrível mundo marinho conosco. Nossa plataforma
          oferece vídeos educativos, infográficos interativos e histórias inspiradoras sobre oceanos, vida
          marinha e conservação. Venha se maravilhar conosco e junte-se à nossa jornada de descoberta e
          aprendizado!</p>

      </div>
      <div id="foto_baleia">
        <img src="./assets\imgs\rabo-baleia.jpg" alt="">
      </div>
    </div>

    <div class="corpo_tubarao">
      <div id="tubarao">
        <img src="./assets\imgs\tubarao.webp" alt="">
      </div>
      <div id="texto_tubarao">
        <p id="titulo_tubarao">Visão geral do projeto Blue Horizon</p>
        <p id="subtitulo_tubarao">Explore as maravilhas dos oceanos e descubra um mundo de possibilidades além
          do horizonte azul.</p><br>
        <p>Cadastre-se para ter acesso a um íncrivel Quiz e a um jogo de Palavras-Cruzadas exclusivo!</p>
      </div>
      <button id="saibaMais" onclick="document.getElementById('div_login').style.display='block'">Cadastrar</button>

    </div>
    <!-- ultimas postagens -->
    <div class="ultimasPostagens">
      <div id="titulo_postagens"><span id="ultimas"> Últimas</span> Postagens</div>

      <div id="primeiraPostagem">
        <img src="./assets\imgs\coral.jpg" alt="">
        <div>
          <div>Expedição Submarina: Uma Jornada pelos Recifes de Coral</div><br>
          <div id="texto_primeiraPostagem">Compartilhe uma emocionante recapitulação de uma recente expedição
            submarina, destacando os incríveis recifes de coral e a diversidade de vida marinha encontrada
            durante a viagem.</div>
          <a href="https://g1.globo.com/ap/amapa/noticia/2017/01/video-mostra-primeira-expedicao-submarina-em-corais-na-costa-do-ap.html"
            target="_blank" class="vermais">Ver mais... </a>
        </div>
      </div>
      <div id="segundaPostagem">
        <img src="./assets\imgs\golfinhos.png" alt="">
        <div>
          <div>Top 10 Destinos de Ecoturismo Marinho</div><br>
          <div id="texto_segundaPostagem">Descubra a beleza única dos oceanos. Cada local oferece uma
            experiência de conexão com a natureza. Prepare-se para se encantar com a diversidade marinha e
            inspirar-se a proteger esses ambientes para o futuro.</div>
          <a href="https://espacomergulho.com.br/top-10-melhores-lugares-do-mundo-pra-se-mergulhar-em-2019/"
            target="_blank" class="vermais">Ver mais...</a>
        </div>
      </div>
      <div id="terceiraPostagem">
        <img src="./assets\imgs\limpeza.jpg" alt="">
        <div>
          <div>Projeto de Limpeza Costeira</div><br>
          <div id="texto_terceiraPostagem">O objetivo deste ciclo de mutirões é promover a conscientização
            ambiental, por meio da coleta desses resíduos. Desta forma, compartilhamos informações sobre a
            importância do ecossistema costeiro e os motivos pelos quais não se deve descartar lixo na
            praia.</div>
          <a href="https://www.limpezadosmares.com/#:~:text=O%20Projeto%20Limpeza%20dos%20Mares,impacto%20negativo%20das%20a%C3%A7%C3%B5es%20humanas."
            target="_blank " class="vermais">Ver mais...</a>
        </div>
      </div>

      <div class="caixaTexto">
        <div id="imagens_caixaTexto">
          <img src="./assets\imgs\aspas.png" alt="">
          <img src="./assets\imgs\aspas2.png" alt="">
        </div>
        <div id="corpo_caixaTexto">
          <div id="texto1">
            <p> O mar é o nosso recurso comum mais global, a conexão entre todas as pessoas e lugares, e
              nossa última fronteira verdadeiramente selvagem. O oceano é o coração do nosso planeta.
            </p>
          </div>
          <div id="texto2">
            <p> A maior parte da Terra é coberta pelo oceano, mas a maioria das pessoas só vê uma pequena parte dele. A
              saúde dos oceanos é crucial para a saúde do nosso planeta.</p>

          </div>
        </div>
        <div id="nomes">
          <p>Sylvia Earle</p>
          <p>Sylvia Earle</p>
        </div>
      </div>



    </div>
    <!-- formulario -->

    <div id="form_mapa" class="form_mapa_container">
      <div>
        <iframe id="mapa"
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3657.2881607958625!2d-46.66425002467007!3d-23.55809197880215!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x94ce59d2a5270055%3A0x3c7ea4f4c7d51fb6!2sRua%20Haddock%20Lobo%2C%20595%20-%20Cerqueira%20C%C3%A9sar%2C%20S%C3%A3o%20Paulo%20-%20SP%2C%2001414-001!5e0!3m2!1spt-BR!2sbr!4v1714527720482!5m2!1spt-BR!2sbr"
          allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
      </div>
      <div id="id_form" class="formulario">

        <p style="display: flex;"><img src="./assets\imgs\logo-semfundo.png"
            style="width: 15%;display: flex; margin-right: 1.6vw;"><span
            style="color: #003366; font-size: 44px; font-weight: 300;">Fale </span><span
            style="color: #003366;  font-size: 44px; font-weight: 600;">Conosco</span></p>
        <br><br>
        <div>
          <div class="form_grupo">
            <div class="campos_form">
              <div class="titulos_form">Nome: </div>
              <input type="text" id="form_nome" class="inputs_form" placeholder="Insira seu nome aqui" remember>
            </div>
            <div class="campos_form">
              <div class="titulos_form">Telefone: </div>
              <input type="tel" id="form_telefone" class="inputs_form" placeholder="11 912345678">
            </div>

          </div>
          <div class="form_grupo">
            <div class="campos_form">
              <div class="titulos_form">Email: </div>
              <input type="email" id="form_email" class="inputs_form" placeholder="exemplo@gmail.com">
            </div>

          </div>
          <div class="form_grupo">
            <div class="campos_form">
              <div class="titulos_form">Mensagem: </div>
              <textarea id="form_mensagem" class="inputs_form" placeholder="Digite sua mensagem aqui"></textarea>
            </div>

          </div>

          <button class="form_button" onclick="enviarMensagem()">Enviar</button>
        </div>
      </div>



    </div>
    <div id="div_login" class="modal">


      <!-- Modal Content -->
      <div class="modal-content animate">
        <div class="imgcontainer">
          <img src="./assets\imgs\logo-semfundo.png" alt="Logo" class="avatar">
        </div>
        <div class="linha-vertical"></div>

        <div id="div_resultado"></div>
        <div class="direita">
          <div id="div_direita">
            <div class="modal_cadastro">
              Ainda não tem uma conta?
              <button id="modal_botao_cadastro" type="button" onclick="modalCadastro()">Cadastro</button>
            </div>
            <div class="modal_titulo">
              Login

            </div>
            <div class="modal_inputs">
              <div class="div_validacao" id="div_erroLogin" style="color: red;"></div> <br>

              Email
              <input type="text" id="modal_email" placeholder="exemplo@email.com.br">
              Senha
              <input type="password" id="modal_senha" placeholder="***********">

            </div>
            <div class="lembrar">
              <div class="lembrar"><input type="checkbox" id="botao_lembrar"> Lembrar de mim</div>

            </div>
            <div class="botao_e_esqueceu">
              <button id="modal_entrar" type="button" onclick="entrar()">Entrar</button>

              <a href="" class="esqueceu">Esqueceu sua senha?</a>
            </div>
          </div>
          <div class="modal_formulario" id="modal_formulario">

            <p style="display: flex;"><span style="color: #003366; font-size: 44px; font-weight: 500;">Cadastro</span>
            </p>
            <br>

            <div class="div_validacao" id="div_erroCadastro" style="color: red;"></div><br>
            <div class="form_grupo">
              <div class="campos_form_cadastro">
                <div class="titulos_form">Nome Completo: </div>
                <input type="text" id="form_cadastro_nome" class="inputs_form_cadastro"
                  placeholder="Insira seu nome aqui">
              </div>
              <div class="campos_form_cadastro">
                <div class="titulos_form">CPF: </div>
                <input type="text" id="form_cadastro_CPF" class="inputs_form_cadastro" placeholder="12345678910"
                  maxlength="11">

              </div>

            </div>
            <div class="form_grupo">
              <div class="campos_form_cadastro">
                <div class="titulos_form">Email: </div>
                <input type="email" id="form_cadastro_email" class="inputs_form_cadastro"
                  placeholder="exemplo@gmail.com">

              </div>

            </div>
            <div class="form_grupo">
              <div class="campos_form_cadastro">
                <div class="titulos_form">Senha: </div>
                <input id="form_senha" class="inputs_form_cadastro" placeholder="************" type="password">

              </div>
              <div class="campos_form_cadastro">
                <div class="titulos_form">Confirme sua senha: </div>
                <input id="form_confirmacao_senha" class="inputs_form_cadastro" placeholder="************"
                  type="password">

              </div>

            </div>
            <div class="botoes_cadastro">
              <button id="botao_voltar" onclick="voltarLogin()" type="button">Voltar</button>
              <button class="form_button" onclick="cadastrar()">Cadastrar</button>
            </div>


            <div id="div_erros_login"></div>
          </div>
        </div>
        <button id="botao_cancelar" onclick="document.getElementById('div_login').style.display='none'"
          class="botao-cancelar">X</button>
      </div>


    </div>




  </div>

  </div>
  <a href="#id_navbar">
    <button id="botao_topo" title="Voltar ao topo">&#8679;</button>
  </a>
  <!-- fim do corpo -->
  </div>

</body>
<footer>
  <div class="footer">
    <div class="infos footerText">
      <a href="inicio.html"><img src="./assets\imgs\logo-semfundo.png" style="width: 4vw;"></a>

      <div class="contato">

        <a href="..\public\dashboard\dashboard.html" style="font-size: 20px; color: #003366;">Developed by João Paulo</a>
        <p style="font-size: 16px; color: #003366;">(11) 97571-1141</p>
        <p style="font-size: 14px; color:#d0ad00;">© 2024 All rights reserved</p>

      </div>
      <p style="font-size: 50px; margin-left: 2vw; font-weight: lighter; color: #003366;">|</p>

      <div class="endereco">
        <u style="color: #003366; font-size: 16px;">Rua Haddock Lobo, 595 São Paulo - SP</u>
      </div>



   
    
    </div>
    
  </div>
</footer>


</html>
<script>


  function cadastrar() {


    var nomeVar = form_cadastro_nome.value;
    var cpfVar = form_cadastro_CPF.value;
    var emailVar = form_cadastro_email.value;
    var senhaVar = form_senha.value;
    var confirmacaoSenhaVar = form_confirmacao_senha.value;

    const arroba = emailVar.indexOf('@')
    const ponto = emailVar.indexOf('.com')
    const school = emailVar.indexOf('.school')
    const exclamacao = senhaVar.indexOf('!')
    const arrobs = senhaVar.indexOf('@')
    const velha = senhaVar.indexOf('#')
    const cifrao = senhaVar.indexOf('$')
    const ast = senhaVar.indexOf('*')
    const comercial = senhaVar.indexOf('&')
    const porcento = senhaVar.indexOf('%')



    if (
      nomeVar == "" ||
      emailVar == "" ||
      cpfVar == "" ||
      senhaVar == "" ||
      confirmacaoSenhaVar == ""
    ) {

      div_erroCadastro.innerHTML = `Preencha todos os campos!`;


      return false;
    } else if (nomeVar.length <= 1) {
      div_erroCadastro.innerHTML = `Seu nome precisa conter<br>
                        mais de 1 caracter!`
      return false;
    } else if (cpfVar.length != 11) {
      div_erroCadastro.innerHTML = `Insira um CPF válido (É necessário ter 11 caracteres)`
      return false;

    }
    else if (arroba < 0 && ponto < 0) {
      div_erroCadastro.innerHTML = `Insira um email válido`
      return false;
    } else if (arroba < 0 && ponto >= 0) {
      div_erroCadastro.innerHTML = `Insira um email válido`
      return false;
    } else if (ponto < 0 && arroba >= 0) {
      div_erroCadastro.innerHTML = `Insira um email válido`
      return false;

    } else if ((emailVar.indexOf(".com") || emailVar.indexOf(".school")) < emailVar.indexOf("@")) {
      div_erroCadastro.innerHTML = `@ precisa vir antes do .`
      return false
    } else if (senhaVar.length < 7 || (exclamacao < 0 && arrobs < 0 && velha < 0 && cifrao < 0 && ast < 0 && comercial < 0 && porcento < 0)) {
      div_erroCadastro.innerHTML = `Sua senha deve conter<br>
                        no mínimo 7 caracteres<br>
                        pelo menos 1 caracter especial`
      return false

    }
    else if (senhaVar != confirmacaoSenhaVar || confirmacaoSenhaVar != senhaVar) {
      div_erroCadastro.innerHTML = `As senhas devem ser compatíveis!`
      return false

    }


  
    fetch("/usuarios/cadastrar", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        nomeServer: nomeVar,
        cpfServer: cpfVar,
        emailServer: emailVar,
        senhaServer: senhaVar,
        confirmacaoSenhaServer: confirmacaoSenhaVar
      }),
    })
      .then(function (resposta) {
        console.log("resposta: ", resposta);

        if (resposta.ok) {

         
          div_resultado.innerHTML = `<p style="top: 0; opacity: 50%; background-color: #003366; width: 50%; height: 10vh; transform: translateX(-50%); margin-bottom: 0; color: white; justify-content:center; align-items:center; position: absolute; text-align:center; display: flex">Cadastro realizado com sucesso! Por favor faça o Login!</p>`;

          setTimeout(() => {
            modal_formulario.style.display = "none"
            div_direita.style.display = "block"
            div_login.style.display = 'block'
          }, "2000");


        } else {
          throw "Houve um erro ao tentar realizar o cadastro!";
        }
      })
      .catch(function (resposta) {
        console.log(`#ERRO: ${resposta}`);
      });

    return false;
  }








  function enviarMensagem() {
    id_form.innerHTML = `<h1 style="color: #003366; font-size: 44px; font-weight: 600;">Mensagem enviada com sucesso!</h1><img src="./assets\imgs/verificado.png" alt="" style="width: 20%; margin-left: 38%; margin-top: 2vh"> <button class="form_button" onclick="location.reload()"> Voltar</button>`
  }
  function modalCadastro() {
    modal_formulario.style.display = "block"
    div_direita.style.display = "none"
  }
  function voltarLogin() {
    modal_formulario.style.display = "none"
    div_direita.style.display = "block"
    div_login.style.display = 'block'
  }

  function entrar() {


    var emailVar = modal_email.value;
    var senhaVar = modal_senha.value;

    if (emailVar == "" || senhaVar == "") {

      div_erroLogin.innerHTML = "Preencha todos os campos!";

      return false;
    }

    console.log("FORM LOGIN: ", emailVar);
    console.log("FORM SENHA: ", senhaVar);

    fetch("/usuarios/autenticar", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        emailServer: emailVar,
        senhaServer: senhaVar
      })
    }).then(function (resposta) {
      console.log("ESTOU NO THEN DO entrar()!")

      if (resposta.ok) {
        console.log(resposta);
        div_resultado.innerHTML = `<p style="top: 0; opacity: 50%; background-color: #003366; width: 50%; height: 10vh; transform: translateX(-50%); margin-bottom: 0; color: white; justify-content:center; align-items:center; position: absolute; text-align:center; display: flex">Logado com sucesso, redirecionando para a tela de usuário... </p>`
        resposta.json().then(json => {
          console.log(json);
          console.log(JSON.stringify(json));
          sessionStorage.EMAIL_USUARIO = json.email;
          sessionStorage.NOME_USUARIO = json.nome;
          sessionStorage.ID_USUARIO = json.idUsuario;
          sessionStorage.DT_CRIACAO = json.DT_CRIACAO;
         

          setTimeout(() => {

            window.location.href = "./dashboard/dashboard.html";
          }, "2000"); // apenas para exibir o loading
        });



      } else {
        div_erroLogin.innerHTML = 'Email e/ou senha inválidos!'
        console.log("Houve um erro ao tentar realizar o login!");

        resposta.text().then(texto => {
          console.error(texto);

        });
      }

    }).catch(function (erro) {
      console.log(erro);
    })

    return false;
  }



</script>
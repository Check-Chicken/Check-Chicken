<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href=".\css\style.css">
  <link rel="shortcut icon" href="./assets/imgs/logo_galinha.png">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <script src="./js/sessao.js"></script>



  <link rel="preconnect" href="https://fonts.gstatic.com">
  <title>CheckChicken | Home</title>
</head>

<body onload="listar()">
  <header>
    <div>
      <nav class="navbar" id="id_navbar">
        <div class="logo">
          <a href="index.html">
            <img src="./assets/imgs/logo_semfundo.png" alt="logo_blueHorizon">
          </a>
        </div>

        <div class="nav-menu">
          <a href="index.html" class="home">Home</a>
          <a href="#servicos" class="servico">Serviços</a>
          <a href="#div_sobre-nos" class="sobreNos">Sobre Nós</a>
          <a href="#form_mapa" class="contato2">Contato</a>
          <button id="entrar" onclick="document.getElementById('div_login').style.display='block'">Entrar</button>
        </div>
      </nav>
    </div>
  </header>
  <div class="corpo">


    <!-- CARROSEL -->

    <div class="slideshow-container">


      <div class="mySlides fade">

        <div class="textoInicial">
          <div class="imagem-inicio">
            <img src="/assets/imgs/fundo-inicio.jpg">

            <p id="textojust" class="textos"><span><span class="verde"> <b>Reduza sua perda <span class="laranja">do
                      lote de galinhas de corte</span> em até 50%.</b> </span> Veja como podemos ajudar através de nosso
                simulador!
                <br><button id="simulador" onclick="simulador()">Simulador</button></p></span>
          </div>

        </div>
      </div>


      <div class="mySlides fade">

        <img src="/assets/imgs/fundo2.png" style="width:100%; opacity: 80%;">
        <p id="texto2">Ajudamos a aumentar a <span class="verde"> <br>lucratividade</span> de sua produção</p>
        <p id="texto2_parte2">Através do monitoramento de <span class="laranja"> temperatura</span> e <span
            class="azul"> umidade</span></p>


      </div>

      <div class="mySlides fade">
        <div class="image3">
          <img src="/assets/imgs/fundo-galinha3.png">
        </div>
        <p id="texto3">Através do monitoramento de<span class="laranja"> <br> <b>temperatura</b></span> e <span
            class="azul"><b>umidade</b> </span></p>
        <p id="texto3_parte2">conseguimos ajudar você<br> a tomar <span class="azul"><b> melhores decisões.</b></span>

        </p>

      </div>

      <!-- setas de ir e voltar -->
      <a class="prev" onclick="passarSlides(-1)">&#10094;</a>
      <a class="next" onclick="passarSlides(1)">&#10095;</a>
    </div>


    <!-- Serviços -->


    <h1 id="servicos"
      style="text-align: center; color: #FFA05D; font-size: 42px; background-color: #F5F4F9; padding-top: 10vh;">
      Serviços
    </h1>
    <div class="servicos">
      <div id="servico1" class="servicos">
        <img src="/assets/imgs/icone-servicos1.png">
        <p style="color: white; font-weight: 700 ; font-size: 3.2vh;">Gerenciamento de Informações</p><br>
        <span style="color: white; font-size: 20px;">Os dados serão <span
            style="color: #FFA05D; font-weight: 600;">capturados pelos sensores</span>, e através disso damos inicio ao
          gerencianmento e ao controle de dados dos lotes.</span>
      </div>

      <div id="servico2" class="servicos">
        <img src="/assets/imgs/icone-servicos2.png" alt="">
        <p style="color: white; font-weight: bold;font-size: 3.2vh;">Monitoramento dos Aviários</p><br>
        <span class="servicoEspaco" style="color: white; font-size: 20px;">Controlamos os <span
            style="color: #FFA05D; font-weight: 600;">níveis
            de temperatura e umidade</span> de cada lote existente, prezando sempre em manter a<span
            style="color: #FFA05D; font-weight: 600;"> qualidade das aves.</span></span>
      </div>
    </div>


    <!-- Sobre Nós -->

    <h2 id="sobre-nos" style="text-align: center; color: #FFA05D; font-size: 42px; padding-top: 10vh;">Sobre Nós</h2>

    <div id="div_sobre-nos">
      <img id="galinha_sobre-nos" src="/assets/imgs/galinha_sobrenos2.png">

      <p style="font-size: 3vh;"><span style="font-weight: bold; font-size: 6vh; color: #5db868;">Check</span> <span
          style="font-weight: bold; font-size: 6vh; color: #4a7a50;">Chicken</span><br> <br><br>

        Somos uma empresa de prestação de serviços focados no setor avícola e realizamos o <span
          style="color: #FFA05D; font-weight: 500; font-size:3vh;">monitoramento </span>e <span
          style="color: #FFA05D; font-weight: 500; font-size: 3vh;">análise de dados</span> <br> <br>

        A <span style="color: #FFA05D; font-weight: 500; font-size: 3vh;">Avicultura</span> é a criação de aves
        visando
        a produção de
        alimentos principalmente carne e ovos, sendo o frango a principal espécie criada.</p>

    </div>





    <!--FORMULÁRIO -->

    <div id="form_mapa" class="form_mapa_container">
      <div>
        <iframe id="mapa"
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3657.2881607958625!2d-46.66425002467007!3d-23.55809197880215!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x94ce59d2a5270055%3A0x3c7ea4f4c7d51fb6!2sRua%20Haddock%20Lobo%2C%20595%20-%20Cerqueira%20C%C3%A9sar%2C%20S%C3%A3o%20Paulo%20-%20SP%2C%2001414-001!5e0!3m2!1spt-BR!2sbr!4v1714527720482!5m2!1spt-BR!2sbr"
          allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
      </div>
      <div id="id_form" class="formulario">

        <p style="display: flex;"><img src="/assets/imgs/logo_galinha.png"
            style="width: 20%; margin-right: 1.6vw;"><span
            style="color: #4a7a50; font-size: 44px; font-weight: 300;">Fale </span><span
            style="color: #FFA05D;  font-size: 44px; font-weight: 600;">Conosco</span></p>
        <br><br>
        <div>
          <div class="form_grupo">
            <div class="campos_form">
              <div class="titulos_form">Nome: </div>
              <input type="text" id="form_nome" class="inputs_form" placeholder="Insira seu nome aqui" remember>
            </div>
            <div class="campos_form">
              <div class="titulos_form">Telefone: </div>
              <input type="tel" id="form_telefone" class="inputs_form" placeholder="11 912345678">
            </div>

          </div>
          <div class="form_grupo">
            <div class="campos_form">
              <div class="titulos_form">Email: </div>
              <input type="email" id="form_email" class="inputs_form" placeholder="exemplo@gmail.com">
            </div>

          </div>
          <div class="form_grupo">
            <div class="campos_form">
              <div class="titulos_form">Mensagem: </div>
              <textarea id="form_mensagem" class="inputs_form" placeholder="Digite sua mensagem aqui"></textarea>
            </div>

          </div>

          <button class="form_button" onclick="enviarMensagem()">Enviar</button>
        </div>
      </div>



    </div>
    <div id="div_login" class="modal">


      <!-- Modal Content -->
      <div class="modal-content animate">
        <div class="imgcontainer">
          <img src="/assets/imgs/logo_galinha.png" alt="Logo" class="avatar">
        </div>
        <div class="linha-vertical"></div>

        <div id="div_resultado"></div>
        <div class="direita">
          <div id="div_direita">
            <div class="modal_cadastro">
              Ainda não tem uma conta?
              <button id="modal_botao_cadastro" type="button" onclick="modalCadastro()">Cadastro</button>
            </div>
            <div class="modal_titulo">
              Login

            </div>
            <div class="modal_inputs">
              <div class="div_validacao" id="div_erroLogin" style="color: red;"></div> <br>

              Email
              <input type="text" id="modal_email" placeholder="exemplo@email.com.br">
              Senha
              <input type="password" id="modal_senha" placeholder="***********">

            </div>
            <div class="lembrar">
              <div class="lembrar"><input type="checkbox" id="botao_lembrar"> Lembrar de mim</div>

            </div>
            <div class="botao_e_esqueceu">
              <button id="modal_entrar" type="button" onclick="entrar()">Entrar</button>

              <a href="" class="esqueceu">Esqueceu sua senha?</a>
            </div>
          </div>

          <!-- // Tela do Cadastro de Usuario // -->
          <div class="modal_formulario" id="modal_formulario">

            <p style="display: flex;"><span style="color: #4a7a50; font-size: 44px; font-weight: 500;">Cadastro</span>
            </p>
            <br>

            <div class="div_validacao" id="div_erroCadastro" style="color: red;"></div><br>
            <div class="form_grupo">

              <div class="campos_form_cadastro">
                <div class="titulos_form">Selecione uma empresa: </div>
                <select name="empresas" id="listaEmpresas">
                  <option selected>Selectione uma empresa</option>
                </select>
              </div>

              <div class="campos_form_cadastro">
                <div class="titulos_form">Nome: </div>
                <input type="text" id="nome_input" class="inputs_form_cadastro"
                  placeholder="Insira seu nome aqui">
              </div>

              <div class="campos_form_cadastro">
                <div class="titulos_form">Telefone: </div>
                <input type="text" id="telefone_input" class="inputs_form_cadastro" placeholder="12345678910"
                  maxlength="11">
              </div>

            </div>
            <div class="form_grupo">
              <div class="campos_form_cadastro">
                <div class="titulos_form">Email: </div>
                <input id="email_input" class="inputs_form_cadastro" placeholder="exemplo@gmail.com">
              </div>

              <!-- <div class="campos_form_cadastro">
                <div class="titulos_form">Senha: </div>
                <input type="text" id="form_cadastro_CPF" class="inputs_form_cadastro" placeholder="12345678910"
                  maxlength="11">
              </div> -->
<!-- 
              <div class="form_grupo">
                <div class="campos_form_cadastro">
                  <div class="titulos_form">Numero: </div>
                  <input id="form_cadastro_numero" class="inputs_form_cadastro" placeholder="02317000">
                </div> -->

              </div>
              <div class="form_grupo">
                <div class="campos_form_cadastro">
                  <div class="titulos_form">Senha: </div>
                  <input id="senha_input" class="inputs_form_cadastro" placeholder="************" type="password">

                </div>
                <div class="campos_form_cadastro">
                  <div class="titulos_form">Confirme sua senha: </div>
                  <input id="confirmacao_senha_input" class="inputs_form_cadastro" placeholder="************"
                    type="password">
                </div>

              </div>
              <div class="botoes_cadastro">
                <button id="botao_voltar" onclick="voltarLogin()" type="button">Voltar</button>
                <button class="form_button" onclick="cadastrar()">Cadastrar</button>
              </div>


              <div id="div_erros_login"></div>
            </div>
          </div>
          <button id="botao_cancelar" onclick="document.getElementById('div_login').style.display='none'"
            class="botao-cancelar">X</button>
        </div>


      </div>


    </div>
    <a href="#id_navbar">
      <button id="botao_topo" title="Voltar ao topo">&#8679;</button>
    </a>

    <!-- END BODY -->

  </div>

</body>
<footer>
  <div class="footer">
    <div class="infos footerText">
      <a href="index.html"><img src="/assets/imgs/logo_galinha.png" style="width: 4vw;"></a>

      <div class="contato">

        <a href="./dashboard/perfil.html" style="font-size: 20px; color: white;">www.checkchicken.com.br</a>
        <p style="font-size: 16px; color: white;">(11) 97571-1141</p>
        <p style="font-size: 14px; color:#d0ad00;">© 2024 All rights reserved by CheckChicken</p>

      </div>
      <p style="font-size: 50px; margin-left: 2vw; font-weight: lighter; color: white;">|</p>

      <div class="endereco">
        <u style="color: white; font-size: 16px;">Rua Haddock Lobo, 595 São Paulo - SP</u>
      </div>
    </div>

  </div>
</footer>


</html>
<script>

  // controles para trocar de paginas
  function simulador() {
    window.location.href = "simulador_financeiro.html"
  }

  function cadastrar() {
    var telefoneVar = telefone_input.value;

    var nomeVar = nome_input.value;
    var dddVar = telefoneVar.substr(0, 2);
    var prefixoVar = telefoneVar.substr(2, 5);
    var sufixoVar = telefoneVar.substr(6, 4);
    var emailVar = email_input.value;
    var senhaVar = senha_input.value;
    var confirmacaoSenhaVar = confirmacao_senha_input.value;
    var empresaVar = listaEmpresas.value

    const arroba = emailVar.indexOf('@')
    const ponto = emailVar.indexOf('.com')
    const school = emailVar.indexOf('.school')
    const exclamacao = senhaVar.indexOf('!')
    const arrobs = senhaVar.indexOf('@')
    const velha = senhaVar.indexOf('#')
    const cifrao = senhaVar.indexOf('$')
    const ast = senhaVar.indexOf('*')
    const comercial = senhaVar.indexOf('&')
    const porcento = senhaVar.indexOf('%')



    if (
      nomeVar == "" ||
      telefoneVar == '' ||
      emailVar == '' ||
      senhaVar == '' ||
      confirmacaoSenhaVar == '' ||
      empresaVar == ''
    ) {
      
      div_erroCadastro.innerHTML =
        "(Mensagem de erro para todos os campos em branco)";

      finalizarAguardar();
      return false;
    } else {
      setInterval(sumirMensagem, 5000);
    }  

    // VALIDAÇÕES NOME //
    let nomeTrim = nomeVar.trim(); 
    let nomeTamanho = nomeVar.length;
    let nomeMaiusculo = nomeTrim[0].toLowerCase();

    // SE O NOME SEM OS ESPACOS FOR IGUAL A VAZIO, ELE NÃO PASSA
    if (nomeTrim == '') {
      
      div_erroCadastro.innerHTML =
        "(Preencha o campo Nome)";

      finalizarAguardar();
      return false;
    } else {
      setInterval(sumirMensagem, 5000);
    }

    // SE O TAMANHO DO NOME FOR MENOR QUE 3 OU MAIOR QUE 50, ELE NÃO PASSA
    if (nomeTamanho > 45 || nomeTamanho < 3) {
      
      div_erroCadastro.innerHTML =
        "(O nome precisa ter no minimo 3 caracteres, e só pode ter no maximo 45 caracteres)";

      finalizarAguardar();
      return false;
    } else {
      setInterval(sumirMensagem, 5000);
    }

    // VALIDAÇÕES TELEFONE//
    let telefoneTamanho = telefoneVar.length;
    
    // SE O TELEFONE TIVER UM TAMANHO DIFERENTE DE 11, ELE NÃO PASSA
    if (telefoneTamanho != 11) {
      
      div_erroCadastro.innerHTML =
        "(O telefone precisa ter 11 caracteres)";

      finalizarAguardar();
      return false;
    } else {
      setInterval(sumirMensagem, 5000);
    }

    // VALIDAÇÕES EMAIL //
    let emailTrim = emailVar.trim();
    let emailTamanho = emailVar.length;
    let emailDominioGmail = emailVar.indexOf('@gmail.com'); 
    let emailDominioHotmail = emailVar.indexOf('@hotmail.com'); 
    let emailDominioSptech = emailVar.indexOf('@sptech.school'); 
    

    // SE O EMAIL SEM OS ESPACOS FOR IGUAL A VAZIO, ELE NÃO PASSA
    if (emailTrim == '') {
      
      div_erroCadastro.innerHTML =
        "(Preencha o campo Email)";

      finalizarAguardar();
      return false;
    } else {
      setInterval(sumirMensagem, 5000);
    }

    // SE O EMAIL TIVER UM TAMANHO MENOR QUE 10 CARACTERES OU MAIOR QUE 200, ELE NÃO PASSA
    if (emailTamanho < 11 || emailTamanho > 200) {
      
      div_erroCadastro.innerHTML =
        "(O email precisa ter no minimo 11 caracteres)";

      finalizarAguardar();
      return false;
    } else {
      setInterval(sumirMensagem, 5000);
    }

    // SE O EMAIL NÃO TIVER O DOMINIO, ELE NÃO PASSA
    if (emailDominioGmail == -1 && emailDominioHotmail == -1 && emailDominioSptech == -1) {
      
      div_erroCadastro.innerHTML =
        "(Seu email não contem um dominio valido)";

      finalizarAguardar();
      return false;
    } else {
      setInterval(sumirMensagem, 5000);
    }

    // SE O DOMINIO NÃO FOR O FINAL DO EMAIL. ELE NÃO PASSA
    if (!emailVar.endsWith('@gmail.com') && !emailVar.endsWith('@hotmail.com') && !emailVar.endsWith('@sptech.school')) {
      
      div_erroCadastro.innerHTML =
        "(O dominio do email precisa estar no final)";

      finalizarAguardar();
      return false;
    } else {
      setInterval(sumirMensagem, 5000);
    }

    // VALIDAÇÕES SENHA //
    let senhaTamanho = senhaVar.length;
    let senhaNumero = senhaVar.indexOf(0);
    

    // SE O TAMANHO DA SENHA FOR MENOR QUE 6 OU MAIOR QUE 20, ELE NÃO PASSA
    if (senhaTamanho < 6 || senhaTamanho > 45) {
      
      div_erroCadastro.innerHTML =
        "(Senha precisa ter no minimo 6 caracteres e no maximo 45)";

      finalizarAguardar();
      return false;
    } else {
      setInterval(sumirMensagem, 5000);
    }

    // SE A SENHA NÃO TIVER PELO MENOS 2 NUMEROS E 1 CARACTER ESPECIAL, ELE NÃO PASSA 
    let numero = 0;
    let caracter = 0;
    for (let contador = 0; contador < senhaTamanho; contador += 1) {
        // Verifica se o caractere é um número
        if (senhaVar[contador] >= '0' && senhaVar[contador] <= '9') {
            numero += 1;
        }

        if (senhaVar[contador] == '@' || senhaVar[contador] == '#' || senhaVar[contador] == '&') {
          caracter += 1;
        }
    }

    if (numero < 2) {
        
        div_erroCadastro.innerHTML = "(Senha precisa ter no minimo 2 numeros)";
        finalizarAguardar();
        return false;
    } else {
      setInterval(sumirMensagem, 5000);
    }

    if (caracter < 1) {
        
        div_erroCadastro.innerHTML = "(Senha precisa ter pelo menos 1 caracter especial como @, &,#)";
        finalizarAguardar();
        return false;
    } else {
      setInterval(sumirMensagem, 5000);
    }

    //SE A CONFIRMAÇÃO DE SENHA NAO FOR IGUAL A SENHA, ELE NÃO PASSA
    if (senhaVar != confirmacaoSenhaVar) {
      
      div_erroCadastro.innerHTML =
        "(Senhas não são iguais)";

      finalizarAguardar();
      return false;
    } else {
      setInterval(sumirMensagem, 5000);
    }



    fetch("/usuarios/cadastrar", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        nomeServer: nomeVar,
        dddServer: dddVar,
        prefixoServer: prefixoVar,
        sufixoServer: sufixoVar,
        emailServer: emailVar,
        senhaServer: senhaVar,
        empresaServer: empresaVar
      }),
    })
      .then(function (resposta) {
        console.log("resposta: ", resposta);

        if (resposta.ok) {


          div_resultado.innerHTML = `<p style="top: 0; opacity: 50%; background-color: #4a7a50; width: 50%; height: 10vh; transform: translateX(-50%); margin-bottom: 0; color: white; justify-content:center; align-items:center; position: absolute; text-align:center; display: flex">Cadastro realizado com sucesso! Por favor faça o Login!</p>`;

          setTimeout(() => {
            modal_formulario.style.display = "none"
            div_direita.style.display = "block"
            div_login.style.display = 'block'
          }, "2000");


        } else {
          throw "Houve um erro ao tentar realizar o cadastro!";
        }
      })
      .catch(function (resposta) {
        console.log(`#ERRO: ${resposta}`);
      });

    return false;
  }








  function enviarMensagem() {
    id_form.innerHTML = `<h1 style="color: #4a7a50; font-size: 44px; font-weight: 600;">Mensagem enviada com sucesso!</h1><img src="./assets\imgs/verificado.png" alt="" style="width: 20%; margin-left: 38%; margin-top: 2vh"> <button class="form_button" onclick="location.reload()"> Voltar</button>`
  }
  function modalCadastro() {
    modal_formulario.style.display = "block"
    div_direita.style.display = "none"
  }
  function voltarLogin() {
    modal_formulario.style.display = "none"
    div_direita.style.display = "block"
    div_login.style.display = 'block'
  }

  function entrar() {

    


    var emailVar = modal_email.value;
    var senhaVar = modal_senha.value;

    if (emailVar == "" || senhaVar == "") {

      div_erroLogin.innerHTML = "Preencha todos os campos!";

      return false;
    }

    console.log("FORM LOGIN: ", emailVar);
    console.log("FORM SENHA: ", senhaVar);

    fetch("/usuarios/autenticar", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        emailServer: emailVar,
        senhaServer: senhaVar
      })
    }).then(function (resposta) {
      console.log("ESTOU NO THEN DO entrar()!")

      if (resposta.ok) {
        console.log(resposta);
        div_resultado.innerHTML = `<p style="top: 0; opacity: 50%; background-color: #4a7a50; width: 50%; height: 10vh; transform: translateX(-50%); margin-bottom: 0; color: white; justify-content:center; align-items:center; position: absolute; text-align:center; display: flex">Logado com sucesso, redirecionando para a tela de usuário... </p>`
        resposta.json().then(json => {
          console.log(json);
          console.log(JSON.stringify(json));
          sessionStorage.EMAIL_USUARIO = json.email;
          sessionStorage.NOME_USUARIO = json.nome;
          sessionStorage.ID_USUARIO = json.idUsuario;
          sessionStorage.ID_EMPRESA = json.idEmpresa


          setTimeout(() => {

            window.location.href = "./dashboard/perfil.html";
          }, "2000"); // apenas para exibir o loading
        });



      } else {
        div_erroLogin.innerHTML = 'Email e/ou senha inválidos!'
        console.log("Houve um erro ao tentar realizar o login!");

        resposta.text().then(texto => {
          console.error(texto);

        });
      }

    }).catch(function (erro) {
      console.log(erro);
    })

    return false;
  }


  let paginaSlide = 1;

  mostrarSlides(paginaSlide);

  // controles para passar slides 
  function passarSlides(numeroSlide) {
    mostrarSlides(paginaSlide += numeroSlide);
  }


  function mostrarSlides(numeroSlide) {
    let contagem;
    let slides = document.getElementsByClassName("mySlides");


    if (numeroSlide > slides.length) {
      paginaSlide = 1
    }
    if (numeroSlide < 1) {
      paginaSlide = slides.length
    }
    for (let contagem = 0; contagem < slides.length; contagem++) {
      slides[contagem].style.display = "none";
    }

    slides[paginaSlide - 1].style.display = "block";

  }
  let btn = document.querySelector('.lnr-eye');
  btn.addEventListener('click', function () {
    let input_senha = document.querySelector('#input_senha');
    if (input_senha.getAttribute('type') == 'password') {
      input_senha.setAttribute('type', 'text');
    } else {
      input_senha.setAttribute('type', 'password');
    }
  });


  function listar() {
    fetch("/empresas/listar", {
      method: "GET",
    })
      .then(function (resposta) {
        resposta.json().then((empresas) => {
          empresas.forEach((empresa) => {
            listaEmpresas.innerHTML += `<option value='${empresa.idEmpresa}'>${empresa.cnpj}</option>`;
          });
        });
      })
      .catch(function (resposta) {
        console.log(`#ERRO: ${resposta}`);
      });
  }

  function sumirMensagem() {
      }


</script>